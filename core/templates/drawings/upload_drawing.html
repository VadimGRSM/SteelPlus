{% extends "core/base.html" %}
{% load static %}

{% block CSS %}
    <link rel="stylesheet" href="{% static 'core/drawings/style_upload_drawing.css' %}">
{% endblock CSS %}

{% block title %}
    Сталь+ Завантаження креслення
{% endblock title %}

{% block content %}
<div class="drawing-upload-container">
    <div class="title-section">
        <h1 class="main-heading">Завантаження креслення</h1>
        <p class="description-text">Завантажте ваші технічні креслення та додайте необхідну інформацію</p>
    </div>

    <form method="post" enctype="multipart/form-data" id="drawingForm">
        <!-- Панель завантаження файлів -->
        <div class="file-upload-panel">
            <div class="panel-header">
                <h2 class="panel-heading">Файли креслень</h2>
            </div>
            <div class="drop-zone" id="fileDropZone">
                <div class="file-icon">
                    <svg id="defaultFileIcon" viewBox="0 0 24 24">
                        <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                    </svg>
                    <svg id="successIcon" viewBox="0 0 24 24" class="hidden-success-icon" style="display: none; fill: #2ecc71;">
                        <path d="M12,2A10,10 0 1,0 22,12A10,10 0 0,0 12,2ZM10,17L5,12L6.41,10.59L10,14.17L17.59,6.59L19,8L10,17Z"/>
                    </svg>
                </div>

                <div class="primary-upload-text" id="uploadText">Перетягніть файли сюди або клікніть для вибору</div>
                <div class="secondary-upload-text" id="uploadDetailsText">Підтримуються формати: DWG, PDF, DXF (макс. 10 МБ)</div>

                <input type="file" class="hidden-file-input" id="fileInput" name="file_path" accept=".dwg,.pdf,.dxf">

                <button class="select-files-button" type="button" onclick="document.getElementById('fileInput').click()">
                    Обрати файли
                </button>

                <div class="selected-files-display" id="selectedFilesContainer"></div>
            </div>
        </div>

        <!-- Панель інформації -->
        <div class="information-panel">
            <div class="info-panel-header">
                <h2 class="info-panel-title">Інформація про креслення</h2>
            </div>
            <div class="info-panel-content">
                <div class="input-field-group">
                    <label class="input-field-label" for="drawingName">
                        Назва креслення <span class="required-indicator">*</span>
                    </label>
                    <input type="text" class="text-field" id="drawingName" name="name" placeholder="Введіть назву креслення" required>
                </div>

                <div class="input-field-group">
                    <label class="input-field-label" for="drawingDescription">Опис</label>
                    <textarea class="text-field multiline-text-field" id="drawingDescription" name="description" placeholder="Опис (необов'язково)"></textarea>
                </div>

                <!-- Секція процесів -->
                <div class="processes-section">
                    <label class="input-field-label">
                        Оберіть процеси які мають бути оброблені за вашим кресленням <span class="required-indicator">*</span>
                    </label>
                    <div class="processes-grid">
                        <button type="button" class="process-button active" data-process="rizkа">Різка</button>
                        <button type="button" class="process-button active" data-process="gibka">Гібка</button>
                        <button type="button" class="process-button" data-process="frezuvannуa">Фрезування</button>
                        <button type="button" class="process-button" data-process="shantazhuvannуa">Шантажування</button>
                        <button type="button" class="process-button" data-process="process5">Процес ...</button>
                        <button type="button" class="process-button" data-process="vidmivannуa">Відмивання</button>
                        <button type="button" class="process-button" data-process="pofraska">Пофраска</button>
                        <button type="button" class="process-button" data-process="process8">Процес ...</button>
                        <button type="button" class="process-button" data-process="process9">Процес ...</button>
                        <button type="button" class="process-button" data-process="process10">Процес ...</button>
                        <button type="button" class="process-button" data-process="process11">Процес ...</button>
                        <button type="button" class="process-button" data-process="process12">Процес ...</button>
                        <button type="button" class="process-button" data-process="process13">Процес ...</button>
                        <button type="button" class="process-button" data-process="process14">Процес ...</button>
                    </div>
                    <input type="hidden" id="selectedProcesses" name="processes" value="">
                </div>
            </div>
        </div>

        <!-- Кнопки дій -->
        <div class="action-button-row">
            <button type="submit" class="primary-action-button" id="submitButton" disabled>Завантажити креслення</button>
        </div>
    </form>
</div>

<script src="{% static 'core/drawings/script_upload_drawing.js' %}"></script>

{% endblock content %}